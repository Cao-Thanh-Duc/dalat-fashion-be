generator client {
  provider = "prisma-client-js"
}

generator dbml {
  provider = "prisma-dbml-generator"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// bỏ type_account và employee
model Users {
  UserID   String  @id @default(cuid())
  UserName String
  Email    String  @unique
  Password String
  RoleID   String?
  Role     Roles?  @relation(fields: [RoleID], references: [RoleID])

  @@map("Users")
}

model ProductCategory {
  CateID   String     @id @default(cuid())
  TypeName String
  Products Products[]

  @@map("ProductCategory")
}

model Supplier {
  SuppID   String     @id @default(cuid())
  SuppName String
  Phone    String?
  Email    String?
  Products Products[]

  @@map("Supplier")
}

model Products {
  ProductID   String           @id @default(cuid())
  ProductName String
  Size        String
  Quantity    Int?
  Old_price   Float?
  Sale_price  Float
  Unit        String
  Describe    String?
  CateID      String?
  SuppID      String?
  Category    ProductCategory? @relation(fields: [CateID], references: [CateID])
  Supplier    Supplier?        @relation(fields: [SuppID], references: [SuppID])
  Images      ListImage[]
  Details     DetailOrder[]

  @@map("Products")
}

model ListImage {
  ImageID   String    @id @default(cuid())
  ProductID String?
  ImageURL  String?
  Product   Products? @relation(fields: [ProductID], references: [ProductID])

  @@map("ListImage")
}

model Roles {
  RoleID   String  @id @default(cuid())
  RoleName String  @unique
  Users    Users[]

  @@map("Roles")
}

model Employee {
  EmployeeID String    @id @default(cuid())
  FullName   String
  Gender     Boolean
  BirthDate  DateTime?
  Phone      String
  Email      String?
  Orders     Orders[]

  @@map("Employee")
}

model Customers {
  CustomerID String    @id @default(cuid())
  FullName   String
  Gender     Boolean
  BirthDate  DateTime?
  Phone      String
  Email      String?
  Address    String?
  Orders     Orders[]

  @@map("Customers")
}

model Promotions {
  PromotionID String        @id @default(cuid())
  Condition   String?
  Value       Float?
  StartDate   DateTime?
  EndDate     DateTime?
  Details     DetailOrder[]

  @@map("Promotions")
}

model Orders {
  OrderID    String        @id @default(cuid())
  SaleDate   DateTime
  Total      Float
  Status     String?
  EmployeeID String?
  CustomerID String?
  Employee   Employee?     @relation(fields: [EmployeeID], references: [EmployeeID])
  Customer   Customers?    @relation(fields: [CustomerID], references: [CustomerID])
  Details    DetailOrder[]

  @@map("Orders")
}

model DetailOrder {
  DetailID    String      @id @default(cuid())
  OrderID     String?
  ProductID   String?
  ProductName String
  Quantity    Int
  Price       Float
  PromotionID String?
  Discount    Float
  Total       Float
  Order       Orders?     @relation(fields: [OrderID], references: [OrderID])
  Product     Products?   @relation(fields: [ProductID], references: [ProductID])
  Promotion   Promotions? @relation(fields: [PromotionID], references: [PromotionID])

  @@map("DetailOrder")
}
